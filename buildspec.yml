version: 0.2

phases:
  pre_build:
    commands:
      - echo "Running pre-build steps..."
      - mvn clean install
  build:
    commands:
      - echo "Building the Java Lambda function..."
      - mvn package
  post_build:
    commands:
      - echo "Build completed successfully."
      - echo "Zipping the package..."
      - mkdir -p target/deployment
      - cp target/recipe-java-lambda-1.0-SNAPSHOT.jar target/deployment/
      - cd target/deployment
      - zip -r recipe-java-lambda.zip recipe-java-lambda-1.0-SNAPSHOT.jar

artifacts:
  files:
    - target/deployment/recipe-java-lambda.zip
